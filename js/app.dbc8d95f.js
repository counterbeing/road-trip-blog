(function(t){function e(e){for(var r,s,i=e[0],c=e[1],l=e[2],u=0,d=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);p&&p(e);while(d.length)d.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,i=1;i<a.length;i++){var c=a[i];0!==o[c]&&(r=!1)}r&&(n.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},o={app:0},n=[];function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var p=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var r=a("64a9"),o=a.n(r);o.a},2843:function(t,e,a){},"38c3":function(t,e,a){"use strict";var r=a("c310"),o=a.n(r);o.a},"4e2f":function(t,e,a){},5490:function(t,e,a){"use strict";var r=a("bdf3"),o=a.n(r);o.a},"560f":function(t,e,a){"use strict";var r=a("4e2f"),o=a.n(r);o.a},"56d7":function(t,e,a){"use strict";a.r(e);var r=a("a026"),o=a("8c4f"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"blog"}},[a("Inspector"),a("Map"),t.story?a("Navbar",{staticClass:"desktop-hidden",attrs:{story:t.story}}):t._e()],1)},s=[],i=a("2f62"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"inspector",staticClass:"inspector"},[t.storySelected?t._e():a("story-index"),t.storySelectedAndLoaded?a("div",[a("Navbar",{attrs:{story:t.story}}),a("main",[a("h1",{staticClass:"title"},[t._v(t._s(t.story.title))]),a("h2",{staticClass:"title"},[a("date-range",{attrs:{start:t.story.startDate,end:t.story.endDate}})],1),a("div",{staticClass:"body",domProps:{innerHTML:t._s(t.story.body)}}),t._l(t.story.photos,(function(e){return a("div",{key:e.file,staticClass:"photo"},[a("media",{attrs:{media:e,imageWidth:t.imageWidth}})],1)}))],2),a("Navbar",{staticClass:"mobile-hidden",attrs:{story:t.story}})],1):t._e()],1)},l=[],p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"story-index"}},[a("h1",[t._v("STORIES")]),a("ul",{staticClass:"story-menu"},t._l(t.stories,(function(e){return a("router-link",{key:e.id,attrs:{tag:"li",to:{name:"Story",params:{id:e.id}}}},[a("h2",[t._v(t._s(e.title))]),a("small",[a("date-range",{attrs:{start:e.startDate,end:e.endDate}})],1)])})),1)])},u=[],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.range?a("span",[a("time",{attrs:{datetime:t.start}},[t._v(t._s(t._f("formatDate")(t.start)))]),t._v(" to\n    "),a("time",{attrs:{datetime:t.end}},[t._v(t._s(t._f("formatDate")(t.end)))])]):a("span",[a("time",{attrs:{datetime:t.start}},[t._v(t._s(t._f("formatDate")(t.start)))])])])},m=[],h=a("9a80"),g={props:["start","end"],computed:{range(){if(!this.start||!this.end)return!1;const t=Object(h["a"])(new Date(this.end),new Date(this.start));return t>24}}},f=g,y=a("2877"),A=Object(y["a"])(f,d,m,!1,null,null,null),v=A.exports,b={components:{DateRange:v},computed:{...Object(i["c"])(["stories"])},data:()=>({}),metaInfo:{title:"Index of Places",titleTemplate:"%s ← Katie and Cory go places together",meta:[{"http-equiv":"Content-Type",content:"text/html; charset=utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{name:"description",content:"The index of places we've gone together. Links to click and explore the map."}]}},S=b,w=(a("8675"),Object(y["a"])(S,p,u,!1,null,null,null)),I=w.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"parent"},[a("router-link",{staticClass:"child",attrs:{tag:"div",to:{name:"Story",params:{id:t.story.nextId}}}},[t._v("\n    Previous\n  ")]),a("router-link",{staticClass:"child",attrs:{tag:"div",to:{name:"Blog Index"}}},[t._v("Index")]),a("router-link",{staticClass:"child",attrs:{tag:"div",to:{name:"Story",params:{id:t.story.previousId}}}},[t._v("\n    Next\n  ")])],1)},L=[],O={props:["story"]},C=O,z=(a("baa4"),Object(y["a"])(C,j,L,!1,null,"8598ea02",null)),x=z.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:""}},[t.isPhoto?a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://s3.amazonaws.com/road-trip-blog/"+t.media.file+"-w"+t.imageWidth+".jpeg",expression:"\n      'https://s3.amazonaws.com/road-trip-blog/' +\n        media.file +\n        '-w' +\n        imageWidth +\n        '.jpeg'\n    "}],attrs:{alt:""}}):t._e(),t.isVideo?a("vue-plyr",[a("video",{attrs:{src:t.url}})]):t._e(),a("figcaption",[t._v(t._s(t.media.description))])],1)},D=[],P={name:"Media",data(){return{url:"https://s3.amazonaws.com/road-trip-blog/"+this.media.file}},props:["media","imageWidth"],computed:{isVideo(){return"video/x-m4v"==this.media.contentType},isPhoto(){return"image/jpeg"==this.media.contentType},isPano(){return this.isPhoto&&this.media.width/this.media.height>1.5},photoResource(){return this.media.file.split+"-w"+this.imageWidth+".webp"}}},T=P,W=Object(y["a"])(T,k,D,!1,null,"2aa47a16",null),_=W.exports,J={components:{StoryIndex:I,Navbar:x,DateRange:v,Media:_},data:()=>({story:null}),methods:{...Object(i["b"])(["setStory"]),async fetchData(){if(!this.storySelected)return void this.setStory(null);const t=this.$route.params.id,e=await fetch(`https://road-trip-blog.s3.amazonaws.com/${t}.json`),a=await e.json();this.story=a,this.setStory(a)}},created(){this.fetchData()},watch:{$route:"fetchData"},metaInfo(){return this.story?{title:this.story.title,titleTemplate:"%s ← Katie and Cory go places together",meta:[{"http-equiv":"Content-Type",content:"text/html; charset=utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{name:"description",content:this.description},{name:"og:image",content:this.imagePreviewUrl}]}:{}},computed:{description(){return this.story.description?this.story.description:`Our time in ${this.story.location}`},imagePreviewUrl(){const t=this.story.photos.filter(t=>"image/jpeg"==t.contentType),e=t[Math.floor(Math.random()*t.length)].file;return`https://s3.amazonaws.com/road-trip-blog/${e}-w1200.jpeg`},storySelected(){return this.$route.params.id},storySelectedAndLoaded(){return this.storySelected&&this.story},inspectorWidth(){return this.$refs.inspector.offsetWidth},imageWidth(){return[2100,1600,1200,700,250].find(t=>this.inspectorWidth<t)}}},E=J,Z=(a("38c3"),Object(y["a"])(E,c,l,!1,null,null,null)),B=Z.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-container"},[a("l-map",{ref:"map",attrs:{zoom:t.zoom,center:t.center,options:t.mapOptions},on:{"update:center":t.centerUpdate,"update:zoom":t.zoomUpdate}},[a("l-tile-layer",{attrs:{url:t.mapSource.url,attribution:t.mapSource.attribution}}),t._l(t.places,(function(e,r){return a("l-marker",{key:r,attrs:{"lat-lng":e.latLng},on:{click:function(a){return t.updateInspector(e.story)}}})})),t._l(t.photos,(function(e){return a("l-marker",{key:e.file,attrs:{icon:t.cmarker,"lat-lng":e.latLng}})}))],2)],1)},M=[],R=a("e11e"),Y=a.n(R),H=a("004e"),N=a.n(H),Q=a("abdd"),X=a.n(Q),V={name:"Map",data(){return{cmarker:Y.a.icon({iconUrl:a("9d95"),iconSize:[20,20],shadowUrl:a("96ae"),shadowSize:[20,20],shadowAnchor:[8,8]}),placeIndex:null,zoom:3,center:Y.a.latLng(35.57369428380629,-97.82369995593741),showParagraph:!1,mapOptions:{zoomSnap:.5}}},computed:{...Object(i["c"])(["story","stories"]),places(){return this.stories.map(t=>({story:t,latLng:Y.a.latLng(t.lat,t.lng)}))},mapSource(){return window.matchMedia("(prefers-color-scheme: dark)").matches?{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'}:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},photos(){return this.story&&this.story.photos?this.story.photos.filter(t=>t.lat).map(t=>({photo:t,latLng:Y.a.latLng(t.lat,t.lng)})):[]},photoBounds(){const t=this.photos.map(t=>t.latLng.lat),e=this.photos.map(t=>t.latLng.lng),a=Y.a.latLng(X()(t),X()(e)),r=Y.a.latLng(N()(t),N()(e));return Y.a.latLngBounds(a,r)},storyBounds(){const t=this.places.map(t=>t.latLng.lat),e=this.places.map(t=>t.latLng.lng),a=Y.a.latLng(X()(t),X()(e)),r=Y.a.latLng(N()(t),N()(e));return Y.a.latLngBounds(a,r)}},watch:{story(){this.updateMapBounds()}},mounted(){},methods:{updateMapBounds(){this.story?this.$refs.map.mapObject.fitBounds(this.photoBounds,{padding:[1,1],maxZoom:12}):this.$refs.map.mapObject.fitBounds(this.storyBounds,{padding:[1,1],maxZoom:12,animate:!0})},updateInspector(t){this.$router.push({name:"Story",params:{id:t.id}}).catch(t=>{})},zoomUpdate(t){this.currentZoom=t},centerUpdate(t){this.currentCenter=t}}},G=V,K=(a("5490"),Object(y["a"])(G,U,M,!1,null,null,null)),F=K.exports,$={data:()=>({}),components:{Map:F,Inspector:B,Navbar:x},computed:{...Object(i["c"])(["story"])}},q=$,tt=(a("560f"),Object(y["a"])(q,n,s,!1,null,null,null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:""}},[a("h1",[t._v("photos")]),t._l(t.photos,(function(e){return a("div",{key:e.file,staticClass:"photo"},[a("img",{attrs:{src:"https://s3.amazonaws.com/road-trip-blog/"+e.file.split(".")[0]+"-w700.webp",alt:""},on:{click:function(a){return t.copyDate(e)}}})])}))],2)},rt=[],ot={data(){return{photos:[]}},async created(){const t=await fetch("https://road-trip-blog.s3.amazonaws.com/photosIndex.json"),e=await t.json();this.photos=e},computed:{imageWidth(){return"250"}},methods:{copyDate(t){const e=document.createElement("textarea");e.value=t.date,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}},nt=ot,st=(a("99be"),Object(y["a"])(nt,at,rt,!1,null,"0e4458a2",null)),it=st.exports;r["a"].use(o["a"]);var ct=new o["a"]({mode:"history",scrollBehavior(){return{x:0,y:0}},routes:[{path:"/photos",name:"Photos",component:it},{path:"/",name:"Blog Index",component:et},{path:"/:id",name:"Story",component:et}]}),lt=a("b166"),pt=a("2699"),ut=a("a40a"),dt=a("4e2b"),mt=a("58ca"),ht=a("caf9"),gt=a("0284"),ft=a.n(gt),yt=(a("6cc5"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)}),At=[],vt={name:"App",async created(){const t=await fetch("https://road-trip-blog.s3.amazonaws.com/storiesIndex.json"),e=await t.json();this.setStories(e)},methods:{...Object(i["b"])(["setStories"])}},bt=vt,St=(a("034f"),Object(y["a"])(bt,yt,At,!1,null,null,null)),wt=St.exports;r["a"].use(i["a"]);var It=new i["a"].Store({state:{currentStory:null,stories:[]},mutations:{setStory(t,e){t.currentStory=e},setStories(t,e){t.stories=e}},actions:{setStory:(t,e)=>{t.commit("setStory",e)},setStories:(t,e)=>t.commit("setStories",e)},getters:{story:t=>t.currentStory,stories:t=>t.stories.sort((t,e)=>new Date(e.startDate)-new Date(t.startDate))}}),jt=a("788d");a("373e");r["a"].use(jt["a"]),r["a"].use(ft.a,{id:"UA-19114773-13",router:ct}),r["a"].use(mt["a"]),r["a"].use(ht["a"],{preLoad:2}),r["a"].component("l-map",pt["a"]),r["a"].component("l-tile-layer",ut["a"]),r["a"].component("l-marker",dt["a"]),delete R["Icon"].Default.prototype._getIconUrl,R["Icon"].Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),r["a"].config.productionTip=!1,r["a"].filter("formatDate",t=>Object(lt["a"])(new Date(t),"LLLL do, u")),new r["a"]({el:"#app",store:It,router:ct,components:{App:wt},template:"<App/>"})},"64a9":function(t,e,a){},"75d8":function(t,e,a){},8675:function(t,e,a){"use strict";var r=a("869a"),o=a.n(r);o.a},"869a":function(t,e,a){},"96ae":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAAthJREFUWIXNmOuS2jAMhQ+E+3bf/0FblgUW6A90khNFMgmYTj2jIWSs6BtZlizPUHfM5PlW+4Ov6Ja+c0ueJxuZMn+WSAQXyWjYxUQ4yhxAY78qfomvTi72OxpyjAcVrDFZOOF7zqOnLiY/Tvjee3UwHnlQPUaYlcnafpcCORddeuwHwBnACcDRfk8Ce7X5IWQJUL1GsI2TtQOMPEjAI4BvJzN0Hg0hM0CFWxrIzmRrsjFo9Z4HVC+eDOogel8GjgwyAvRwGwAfIrsCHPV1ExByJbIM9ELIDJAxtzaoXwA+7VnhuHup58cN5Y01k3nq9RSQ3mPM7Qzq0yC39l53bQbH94Skt3xK0nR0wz1e21VYuI/pptgI4IfA0XNZco4gORr336eiQZ6MPNig27FbxDH3TImMKs4V/TR0Rj9HopHJrA4rA/Nx51PJK8NvKIIOkrgGuG4OzXneczXgsvw6CKG5U6TSGl2lmBpzUyDVIbTZCyMPSIUl8hJWczCsvM12l0dLrDmrQTnPvTL4vcxmu8QasJzc+ImV4RSyZHewdKrwTrASaM9uFFvRqflfwIVVKQLUQl88TFYaxVbAA/qC/W64h3bn6JPzaER5N6g/N3q7rQejA6YWb86pDYeCzV6po4IW73MAWXv4voU2Bx4kICcf0TU4qlDLi7pibAdok05Jl1j7h2+B1DaxBpzvVdRW65Am+IDP7L7v9X3EM4NLe8S9cfoDYI97Q0XIwXnQJ0q9PcjK3hTQaJUOArfH3YvaKyPyoIfVPsLX7jGgmsaYRgi3F8AvdJukDaVsifWjHjaCy+IySiVHgfuNznvcIL04zzyoBqLSl91WKVDWuDPmdGkJ12s5gbgv5oSLe0djbHBeuVk4GChvFtgsDbJEdvXhIaOcVeNu5mEKK10eKaQaVGO1brfS/Prf3w9OyWO1b1hHVaWpFSE6bZdO3o92/WiDz4ypido/jxp/AWaOkzH5U+ltAAAAAElFTkSuQmCC"},"99be":function(t,e,a){"use strict";var r=a("75d8"),o=a.n(r);o.a},"9d95":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAAeJJREFUWIXtmKFrQlEUhz/HmhNZWTMKpoHRZDIMXBH0L9iQ5f0BY3kYx5AtLCuYhAWTZUarIKzY1sSZXXhHUO871/vcu7LwPnhBve/8Pi88vedAQkKClVTYm9+3d673l4ESUAQKQA7IAnNgBkyAMTAChi4FL15ftl6fuppskAbqQA2oEv4lz+W6BBrACugDPaALLF3DogpWgBsJjUIKuJbrCngDBi43nkQIaQLPB8jt0pA6TZfFrjt4DzwAmQOldskDT8AZ0LItdNnBJvHKrclIXetO7hOsEOxe3HJrMlK/oi2wCaYJHoh8zFK75CUnHfahTbDO3x8IVxqSZ2ATrPlxiZanCZYJfoSPSVVyt9AESyh/gx5JSe4WmmDRr4uKkasJFjyLaBi5mmDOs4iGkasJZj2LaBi5muDcs4iGkasJzjyLaBi5muDEs4iGkasJjj2LaBi5muCI4Jh+TFaSu4UmOCToIY5Jn5DGynZY6Plzcc+zCXaBjh8Xg47kGdgElwTd19SH0QZTyQltRfcd+QcETc0iZqk1C6mvtqAuTVMbeCR+yYXUbdsWubadLeCHoMGJo0eZSk2rHESbLLSBLw6bLGzSIcJkIeroYwB8Ah/YZzO7HG02gxR/lyv26VZCwn/jF7pEVnFdzypfAAAAAElFTkSuQmCC"},baa4:function(t,e,a){"use strict";var r=a("2843"),o=a.n(r);o.a},bdf3:function(t,e,a){},c310:function(t,e,a){}});
//# sourceMappingURL=app.dbc8d95f.js.map